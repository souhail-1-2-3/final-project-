<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Quiz Culture G√©n√©rale</title>
  <style>
    :root {
      --bg: #181c2f;
      --card-bg: rgba(24,28,47,0.97);
      --text: #fff;
      --primary: #1de9b6;
      --secondary: #7c4dff;
      --accent: #ff4081;
      --shadow: #7c4dff;
    }
    body {
      font-family: 'Orbitron', 'Arial', sans-serif;
      background: var(--bg) !important;
      color: var(--text) !important;
      margin: 0;
      padding: 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      letter-spacing: 1px;
    }

    h1 {
      color: var(--primary);
      margin-bottom: 20px;
      text-shadow: 0 0 12px var(--primary), 0 0 40px var(--secondary);
      font-size: 2.5em;
      font-family: 'Orbitron', 'Arial', sans-serif;
      letter-spacing: 2px;
    }

    .card {
      background: var(--card-bg) !important;
      color: var(--text) !important;
      border-radius: 18px;
      box-shadow: 0 0 24px var(--shadow), 0 0 4px #fff3;
      padding: 28px;
      margin: 18px;
      width: 340px;
      border: 2px solid var(--primary);
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 18px;
      background: linear-gradient(120deg, #1de9b6 0%, #ff4081 100%);
      opacity: 0.10;
      z-index: 0;
      pointer-events: none;
    }

    .card:hover {
      transform: scale(1.03) rotate(-1deg);
      box-shadow: 0 0 40px #1de9b6, 0 0 8px #ff4081;
    }

    .question {
      font-weight: bold;
      margin-bottom: 18px;
      color: #fff;
      font-size: 1.15em;
      text-shadow: 0 0 6px #1de9b6;
      position: relative;
      z-index: 1;
    }

    .answers button {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(90deg, #1de9b6 0%, #ff4081 100%);
      color: #fff;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 0 10px #7c4dff, 0 0 2px #ff4081;
      transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
      outline: none;
      position: relative;
      z-index: 1;
    }

    .answers button:hover:not(:disabled) {
      background: linear-gradient(90deg, #ff4081 0%, #1de9b6 100%);
      transform: scale(1.04);
      box-shadow: 0 0 20px #ff4081, 0 0 8px #1de9b6;
    }

    .answers button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      filter: grayscale(0.5);
    }

    .result {
      margin-top: 12px;
      font-weight: bold;
      font-size: 1.1em;
      text-shadow: 0 0 8px #fff, 0 0 16px #1de9b6;
      min-height: 1.5em;
      position: relative;
      z-index: 1;
    }

    #scoreboard {
      margin: 22px 0;
      font-size: 1.3em;
      color: #ff4081;
      text-shadow: 0 0 10px #1de9b6, 0 0 20px #7c4dff;
      font-family: 'Orbitron', 'Arial', sans-serif;
      letter-spacing: 2px;
    }

    #restart {
      padding: 12px 28px;
      background: linear-gradient(90deg, #ff4081 0%, #1de9b6 100%);
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 28px;
      font-size: 1.1em;
      font-family: 'Orbitron', 'Arial', sans-serif;
      font-weight: bold;
      box-shadow: 0 0 16px #ff4081, 0 0 8px #7c4dff;
      transition: background 0.2s, box-shadow 0.2s, transform 0.2s;
    }

    #restart:hover {
      background: linear-gradient(90deg, #1de9b6 0%, #ff4081 100%);
      box-shadow: 0 0 32px #1de9b6, 0 0 16px #ff4081;
      transform: scale(1.05);
    }

    /* Import Orbitron font for a futuristic look */
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

    .menu-btn {
      padding: 12px 24px;
      margin: 10px 0;
      border: none;
      border-radius: 8px;
      background: linear-gradient(90deg, #1de9b6 0%, #7c4dff 100%);
      color: #fff;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 0 10px #7c4dff, 0 0 2px #ff4081;
      transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
      outline: none;
      display: inline-block;
    }

    .menu-btn:hover {
      background: linear-gradient(90deg, #ff4081 0%, #1de9b6 100%);
      transform: scale(1.04);
      box-shadow: 0 0 20px #ff4081, 0 0 8px #1de9b6;
    }

    @media (max-width: 600px) {
      body {
        padding: 8px;
      }
      .card, #timer-bar {
        width: 98vw !important;
        min-width: unset;
        max-width: 100vw;
        box-sizing: border-box;
        padding: 12px !important;
        margin: 8px 0 !important;
      }
      h1 {
        font-size: 1.3em !important;
        margin-bottom: 10px !important;
        text-align: center;
        word-break: break-word;
      }
      #scoreboard {
        font-size: 1em !important;
        margin: 12px 0 !important;
      }
      .answers button, .menu-btn, #restart, #back {
        font-size: 1em !important;
        padding: 10px 0 !important;
        margin: 7px 0 !important;
        min-width: 0;
        width: 100%;
        box-sizing: border-box;
      }
      .menu-btn {
        padding: 10px 0 !important;
        font-size: 1em !important;
      }
      .result, .explication {
        font-size: 1em !important;
      }
    }

    // Palette claire
const lightTheme = {
  '--bg': '#f7f7fa',
  '--card-bg': '#fff',
  '--text': '#181c2f',
  '--primary': '#1de9b6',
  '--secondary': '#7c4dff',
  '--accent': '#ff4081',
  '--shadow': '#e0e0e0'
};
// Palette sombre (par d√©faut)
const darkTheme = {
  '--bg': '#181c2f',
  '--card-bg': 'rgba(24,28,47,0.97)',
  '--text': '#fff',
  '--primary': '#1de9b6',
  '--secondary': '#7c4dff',
  '--accent': '#ff4081',
  '--shadow': '#7c4dff'
};
// Applique le th√®me
function applyTheme(theme) {
  for (const key in theme) {
    document.documentElement.style.setProperty(key, theme[key]);
  }
}
// D√©tecte le th√®me actuel
function isDark() {
  return (localStorage.getItem('theme') || 'dark') === 'dark';
}
// Initialise le th√®me au chargement
function initTheme() {
  if (isDark()) applyTheme(darkTheme);
  else applyTheme(lightTheme);
}
// Toggle
document.getElementById('theme-toggle').onclick = function() {
  const dark = isDark();
  localStorage.setItem('theme', dark ? 'light' : 'dark');
  initTheme();
};
initTheme();
  </style>
</head>
<body>

  <button id="theme-toggle" style="position:fixed;top:18px;right:18px;z-index:1000;padding:10px 18px;border-radius:8px;border:none;cursor:pointer;font-family:'Orbitron',Arial,sans-serif;font-weight:600;background:linear-gradient(90deg,#1de9b6 0%,#7c4dff 100%);color:#fff;box-shadow:0 0 10px #7c4dff,0 0 2px #ff4081;transition:background 0.2s;">
    Mode clair/sombre
  </button>

  <h1>üß† Quiz Culture G√©n√©rale</h1>
  <div id="scoreboard">Score : 0 / 3</div>

  <button id="restart" onclick="restartQuiz()">Recommencer</button>
  <button id="back" onclick="goBack()" style="margin-top:12px;padding:10px 24px;background:linear-gradient(90deg,#00ffe7 0%,#ff00cc 100%);color:#fff;border:none;border-radius:10px;cursor:pointer;font-size:1em;font-family:'Orbitron','Arial',sans-serif;font-weight:bold;box-shadow:0 0 10px #00ffe7,0 0 2px #ff00cc;transition:background 0.2s,box-shadow 0.2s,transform 0.2s;">
    Retour au menu
  </button>

  <div id="menu" style="display:none;">
    <button class="menu-btn" onclick="startQuiz('culture')">Culture g√©n√©rale</button>
    <button class="menu-btn" onclick="startQuiz('islam')">Culture islamique</button>
    <button class="menu-btn" onclick="startQuiz('histoire')">Histoire</button>
    <button class="menu-btn" onclick="startQuiz('geo')">G√©ographie</button>
    <button class="menu-btn" onclick="startQuiz('autres')">Autres</button>
    <button class="menu-btn" onclick="startQuiz('sport')">Sport</button>
    <div style="margin-top:20px;">
      <label style="color:#fff;font-size:1em;">
        <input type="checkbox" id="no-timer" style="transform:scale(1.3);margin-right:8px;">
        Mode sans timer (relax)
      </label>
    </div>
  </div>
  <div id="timer-bar" style="width:340px;height:10px;background:#222;border-radius:6px;overflow:hidden;margin:18px auto 0 auto;display:none;">
    <div id="timer-progress" style="height:100%;background:linear-gradient(90deg,#ff4081,#1de9b6);width:100%;transition:width 0.2s;"></div>
  </div>

  <script>
const questionsByCategory = {
  culture: [
    { question: "Quelle est la capitale du Canada ?", answers: ["Toronto", "Ottawa", "Vancouver"], correct: "Ottawa" },
    { question: "Quel est le plus grand pays du monde ?", answers: ["Chine", "√âtats-Unis", "Russie"], correct: "Russie" },
    { question: "Combien de couleurs sur le drapeau fran√ßais ?", answers: ["2", "3", "4"], correct: "3" },
    { question: "Quel est l‚Äôanimal terrestre le plus rapide ?", answers: ["Gu√©pard", "Lion", "Antilope"], correct: "Gu√©pard" },
    { question: "Quel est le plus haut sommet du monde ?", answers: ["Mont Blanc", "K2", "Everest"], correct: "Everest" },
    { question: "Qui a peint la Joconde ?", answers: ["Vincent Van Gogh", "L√©onard de Vinci", "Pablo Picasso"], correct: "L√©onard de Vinci" },
    { question: "Quelle plan√®te est la plus proche du Soleil ?", answers: ["V√©nus", "Mercure", "Mars"], correct: "Mercure" },
    { question: "En quelle ann√©e l‚Äôhomme a-t-il march√© sur la Lune ?", answers: ["1969", "1972", "1959"], correct: "1969" },
    { question: "Quel est le plus grand oc√©an du monde ?", answers: ["Atlantique", "Indien", "Pacifique"], correct: "Pacifique" },
    { question: "Combien y a-t-il de z√©ros dans un milliard ?", answers: ["6", "9", "12"], correct: "9" }
  ],
  islam: [
    { question: "Combien de pri√®res obligatoires par jour en islam ?", answers: ["3", "5", "7"], correct: "5" },
    { question: "Quel est le livre sacr√© de l‚Äôislam ?", answers: ["Bible", "Torah", "Coran"], correct: "Coran" },
    { question: "Dans quelle ville est n√© le Proph√®te Mohammed ?", answers: ["M√©dine", "La Mecque", "J√©rusalem"], correct: "La Mecque" },
    { question: "Quel mois les musulmans je√ªnent-ils ?", answers: ["Ramadan", "Chawwal", "Mouharram"], correct: "Ramadan" },
    { question: "Combien de sourates dans le Coran ?", answers: ["114", "99", "120"], correct: "114" },
    { question: "Quel est le premier pilier de l‚Äôislam ?", answers: ["La pri√®re", "La profession de foi", "Le je√ªne"], correct: "La profession de foi" },
    { question: "Quel proph√®te a construit l‚Äôarche ?", answers: ["Moussa", "Nouh", "Ibrahim"], correct: "Nouh" },
    { question: "Dans quelle ville se trouve la mosqu√©e Al-Aqsa ?", answers: ["La Mecque", "M√©dine", "J√©rusalem"], correct: "J√©rusalem" },
    { question: "Comment s‚Äôappelle le dernier proph√®te de l‚Äôislam ?", answers: ["Issa", "Moussa", "Mohammed"], correct: "Mohammed" },
    { question: "Combien de fois par an a lieu le p√®lerinage (Hajj) ?", answers: ["1", "2", "3"], correct: "1" }
  ],
  histoire: [
    { question: "En quelle ann√©e a eu lieu la R√©volution fran√ßaise ?", answers: ["1789", "1848", "1914"], correct: "1789" },
    { question: "Qui √©tait le premier pr√©sident des √âtats-Unis ?", answers: ["Lincoln", "Washington", "Jefferson"], correct: "Washington" },
    { question: "Quel empire a construit le Colis√©e ?", answers: ["Grec", "Romain", "√âgyptien"], correct: "Romain" },
    { question: "Qui a d√©couvert l‚ÄôAm√©rique ?", answers: ["Christophe Colomb", "Vasco de Gama", "Magellan"], correct: "Christophe Colomb" },
    { question: "Quel roi fut surnomm√© le Roi Soleil ?", answers: ["Louis XIV", "Louis XVI", "Fran√ßois Ier"], correct: "Louis XIV" },
    { question: "En quelle ann√©e a commenc√© la Premi√®re Guerre mondiale ?", answers: ["1914", "1939", "1815"], correct: "1914" },
    { question: "Qui a invent√© l‚Äôimprimerie ?", answers: ["Gutenberg", "Edison", "Pasteur"], correct: "Gutenberg" },
    { question: "O√π se trouve la pyramide de Kh√©ops ?", answers: ["Gizeh", "Louxor", "Saqqarah"], correct: "Gizeh" },
    { question: "Quel pays a construit la Grande Muraille ?", answers: ["Chine", "Japon", "Inde"], correct: "Chine" },
    { question: "Qui √©tait Cl√©op√¢tre ?", answers: ["Reine d‚Äô√âgypte", "Imp√©ratrice de Rome", "Reine de Perse"], correct: "Reine d‚Äô√âgypte" }
  ],
  geo: [
    { question: "Quel est le plus grand oc√©an du monde ?", answers: ["Atlantique", "Indien", "Pacifique"], correct: "Pacifique" },
    { question: "Combien de continents existe-t-il ?", answers: ["5", "6", "7"], correct: "7" },
    { question: "Quel est le plus grand d√©sert du monde ?", answers: ["Sahara", "Gobi", "Antarctique"], correct: "Antarctique" },
    { question: "Quel est le plus long fleuve du monde ?", answers: ["Nil", "Amazon", "Yangts√©"], correct: "Amazon" },
    { question: "Dans quel pays se trouve le Kilimandjaro ?", answers: ["Kenya", "Tanzanie", "Afrique du Sud"], correct: "Tanzanie" },
    { question: "Quelle est la capitale du Br√©sil ?", answers: ["Rio", "Brasilia", "S√£o Paulo"], correct: "Brasilia" },
    { question: "Quel est le plus grand lac d‚ÄôAfrique ?", answers: ["Victoria", "Tanganyika", "Malawi"], correct: "Victoria" },
    { question: "Quel pays a la plus grande superficie ?", answers: ["Chine", "√âtats-Unis", "Russie"], correct: "Russie" },
    { question: "Quel est le plus haut sommet d‚ÄôEurope ?", answers: ["Mont Blanc", "Elbrouz", "Matterhorn"], correct: "Elbrouz" },
    { question: "Quel est le plus grand pays d‚ÄôAm√©rique du Sud ?", answers: ["Argentine", "Br√©sil", "Colombie"], correct: "Br√©sil" }
  ],
  autres: [
    { question: "Quel est l‚Äô√©l√©ment chimique \"O\" ?", answers: ["Or", "Oxyg√®ne", "Osmium"], correct: "Oxyg√®ne" },
    { question: "Quel est le plus grand mammif√®re marin ?", answers: ["Baleine bleue", "Orque", "Dauphin"], correct: "Baleine bleue" },
    { question: "Quel est le plus grand oiseau ?", answers: ["Autruche", "Aigle", "Albatros"], correct: "Autruche" },
    { question: "Combien de c√¥t√©s a un hexagone ?", answers: ["5", "6", "8"], correct: "6" },
    { question: "Qui a √©crit 'Le Petit Prince' ?", answers: ["Victor Hugo", "Antoine de Saint-Exup√©ry", "Jules Verne"], correct: "Antoine de Saint-Exup√©ry" },
    { question: "Quel est le symbole chimique du fer ?", answers: ["Fe", "Ir", "Fr"], correct: "Fe" },
    { question: "Quel est le plus grand animal terrestre ?", answers: ["√âl√©phant", "Girafe", "Rhinoc√©ros"], correct: "√âl√©phant" },
    { question: "Quel est le plus grand volcan actif ?", answers: ["Etna", "Kilauea", "Mauna Loa"], correct: "Mauna Loa" },
    { question: "Quel est le m√©tal le plus l√©ger ?", answers: ["Aluminium", "Lithium", "Fer"], correct: "Lithium" },
    { question: "Quel est le plus grand archipel du monde ?", answers: ["Indon√©sie", "Philippines", "Japon"], correct: "Indon√©sie" }
  ],
  sport: [
    { question: "Quel pays a remport√© la Coupe du Monde de football 2018 ?", answers: ["Br√©sil", "France", "Allemagne"], correct: "France", difficulty: "facile" },
    { question: "Combien de joueurs dans une √©quipe de football ?", answers: ["9", "10", "11"], correct: "11", difficulty: "facile" },
    { question: "Quel est le sport de Michael Jordan ?", answers: ["Football", "Basketball", "Tennis"], correct: "Basketball", difficulty: "facile" },
    { question: "Combien de points pour un essai au rugby ?", answers: ["3", "5", "7"], correct: "5", difficulty: "moyenne" },
    { question: "Dans quel pays sont n√©s les Jeux Olympiques ?", answers: ["Italie", "Gr√®ce", "France"], correct: "Gr√®ce", difficulty: "facile" },
    { question: "Quel est le surnom d‚ÄôUsain Bolt ?", answers: ["La Fus√©e", "L‚Äô√âclair", "La Fl√®che"], correct: "L‚Äô√âclair", difficulty: "moyenne" },
    { question: "Combien de sets pour gagner un match de tennis masculin en Grand Chelem ?", answers: ["2", "3", "5"], correct: "3", difficulty: "moyenne" },
    { question: "Quel est le record du 100m (en secondes) ?", answers: ["9.58", "9.72", "9.63"], correct: "9.58", difficulty: "difficile" },
    { question: "Combien de joueurs sur le terrain au basket (une √©quipe) ?", answers: ["5", "6", "7"], correct: "5", difficulty: "facile" },
    { question: "Quel pays a gagn√© le plus de m√©dailles olympiques ?", answers: ["Chine", "√âtats-Unis", "Russie"], correct: "√âtats-Unis", difficulty: "difficile" }
  ]
};

// R√©cup√®re la cat√©gorie depuis l'URL
function getCategory() {
  const params = new URLSearchParams(window.location.search);
  return params.get('cat') || 'culture';
}

const cat = getCategory();
const allQuestions = questionsByCategory[cat] || questionsByCategory['culture'];

// M√©lange et s√©lectionne 10 questions au hasard (ou moins si pas assez)
function getRandomQuestions(arr, n) {
  const shuffled = arr.slice().sort(() => 0.5 - Math.random());
  return shuffled.slice(0, Math.min(n, arr.length));
}

const questions = getRandomQuestions(allQuestions, 10);
let score = 0;
let current = 0;
const scoreboard = document.getElementById('scoreboard');
const quizDiv = document.createElement('div');
document.body.insertBefore(quizDiv, document.getElementById('restart'));

// Change le titre selon la cat√©gorie
const titles = {
  culture: "üß† Quiz Culture G√©n√©rale",
  islam: "üïå Quiz Culture Islamique",
  histoire: "üìú Quiz Histoire",
  geo: "üåç Quiz G√©ographie",
  autres: "‚≠ê Quiz Autres",
  sport: "üèÜ Quiz Sport"
};
document.querySelector('h1').textContent = titles[cat] || titles['culture'];

let timerEnabled = true;
let timerDuration = 15; // secondes par question
let timerInterval;
const timerBar = document.getElementById('timer-bar');
const timerProgress = document.getElementById('timer-progress');

// Ajoute la gestion du mode sans timer
function startQuiz(cat) {
  timerEnabled = !document.getElementById('no-timer').checked;
  window.location.href = `quizz.html?cat=${cat}&timer=${timerEnabled ? 1 : 0}`;
}

// R√©cup√®re le param√®tre timer dans l'URL
function getTimerMode() {
  const params = new URLSearchParams(window.location.search);
  return params.get('timer') !== "0";
}
timerEnabled = getTimerMode();

// Pour stocker les r√©ponses de l'utilisateur
let userAnswers = [];

// Ajoute une propri√©t√© "explication" √† chaque question si tu veux (exemple) :
/*
{ question: "...", answers: [...], correct: "...", explication: "Petite anecdote ou explication." }
*/

function showQuestion() {
  clearInterval(timerInterval);
  timerBar.style.display = timerEnabled ? "block" : "none";
  if (current >= questions.length) {
    showFinalScore();
    return;
  }
  const q = questions[current];
  quizDiv.innerHTML = `
    <div class="card">
      <div class="question">${q.question}</div>
      <div class="answers">
        ${q.answers.map(ans => `<button>${ans}</button>`).join('')}
      </div>
      <div class="result"></div>
      <div class="explication" style="margin-top:8px;color:#1de9b6;font-size:0.98em;"></div>
    </div>
  `;
  if (timerEnabled) {
    let timeLeft = timerDuration;
    timerProgress.style.width = "100%";
    timerInterval = setInterval(() => {
      timeLeft--;
      timerProgress.style.width = (timeLeft / timerDuration * 100) + "%";
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        const resultDiv = quizDiv.querySelector('.result');
        resultDiv.textContent = "‚è∞ Temps √©coul√© !";
        resultDiv.style.color = "#ff4081";
        quizDiv.querySelector('.explication').innerHTML = `Bonne r√©ponse : <b>${q.correct}</b>${q.explication ? "<br>" + q.explication : ""}`;
        document.querySelectorAll('.answers button').forEach(b => b.disabled = true);
        userAnswers.push({question: q.question, user: null, correct: q.correct});
        setTimeout(() => { current++; showQuestion(); }, 2000);
      }
    }, 1000);
  }
  document.querySelectorAll('.answers button').forEach(btn => {
    btn.addEventListener('click', () => {
      clearInterval(timerInterval);
      const result = quizDiv.querySelector('.result');
      const explication = quizDiv.querySelector('.explication');
      let isCorrect = btn.textContent === q.correct;
      if (isCorrect) {
        result.textContent = "‚úÖ Bonne r√©ponse !";
        result.style.color = "green";
        score++;
      } else {
        result.textContent = "‚ùå Mauvaise r√©ponse.";
        result.style.color = "red";
        explication.innerHTML = `Bonne r√©ponse : <b>${q.correct}</b>${q.explication ? "<br>" + q.explication : ""}`;
      }
      userAnswers.push({question: q.question, user: btn.textContent, correct: q.correct});
      scoreboard.textContent = `Score : ${score} / ${questions.length}`;
      document.querySelectorAll('.answers button').forEach(b => b.disabled = true);
      setTimeout(() => { current++; showQuestion(); }, 2000);
    });
  });
}

function restartQuiz() {
  window.location.href = "index.html";
}

function goBack() {
  window.location.href = "index.html";
}

function showFinalScore() {
  let message = "";
  const ratio = score / questions.length;
  const percent = Math.round(ratio * 100);
  if (ratio === 1) message = "üéâ Parfait ! Tu es incollable !";
  else if (ratio >= 0.8) message = "üëè Tr√®s bien !";
  else if (ratio >= 0.5) message = "üëç Pas mal, continue √† t'entra√Æner !";
  else message = "üí° Tu peux progresser, r√©essaie !";

  // Sauvegarde du score dans le localStorage
  const scoresKey = 'quizScores';
  let scores = [];
  try {
    scores = JSON.parse(localStorage.getItem(scoresKey)) || [];
  } catch(e) {}
  const now = new Date();
  const dateStr = now.toLocaleDateString() + " " + now.toLocaleTimeString().slice(0,5);
  scores.push({
    date: dateStr,
    theme: titles[cat] || cat,
    score: `${score}/${questions.length}`,
    percent: percent
  });
  // On garde les 10 meilleurs scores (par pourcentage d√©croissant)
  scores = scores.sort((a, b) => b.percent - a.percent).slice(0, 10);
  localStorage.setItem(scoresKey, JSON.stringify(scores));

  // Affichage du score final
  let reviewHtml = userAnswers.map((a, i) =>
    `<li style="margin-bottom:8px;">
      <b>Q${i+1}.</b> ${a.question}<br>
      <span style="color:${a.user === a.correct ? 'green':'#ff4081'}">
        Ta r√©ponse : ${a.user ? a.user : "<i>aucune</i>"}
      </span>
      <br>
      <span style="color:#1de9b6">Bonne r√©ponse : ${a.correct}</span>
    </li>`
  ).join('');

  // Affichage des meilleurs scores
  let bestScoresHtml = scores.map(s =>
    `<li>${s.date} ‚Äî <b>${s.theme}</b> : <span style="color:#1de9b6">${s.score} (${s.percent}%)</span></li>`
  ).join('');

  quizDiv.innerHTML = `
    <div class="card">
      <div class="result" style="font-size:1.3em;">
        Quiz termin√© !<br>
        Score : <b>${score} / ${questions.length}</b> (${percent}%)
      </div>
      <div style="margin:16px 0 8px 0;font-size:1.1em;">${message}</div>
      <button class="menu-btn" onclick="showReview()" style="margin-bottom:12px;">Revoir mes r√©ponses</button>
      <button class="menu-btn" onclick="restartQuiz()">Recommencer</button>
      <button class="menu-btn" onclick="goBack()">Retour au menu</button>
      <div style="margin-top:24px;">
        <strong style="color:#ff4081;">üèÜ Meilleurs scores</strong>
        <ul style="margin:10px 0 0 0; padding:0; list-style:none; text-align:left;">${bestScoresHtml}</ul>
      </div>
      <ul id="review-list" style="display:none;text-align:left;margin-top:18px;">${reviewHtml}</ul>
    </div>
  `;
}

function showReview() {
  document.getElementById('review-list').style.display = "block";
}

// Met √† jour le score initial
scoreboard.textContent = `Score : 0 / ${questions.length}`;
showQuestion();
  </script>
</body>
</html>
